<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Price Calculator</title>
    <link rel="stylesheet" href="style.css" />
    <!-- bootstrap icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <table>
      <caption>
        គណនាតម្លៃ
      </caption>
      <thead>
        <tr>
          <th>តម្លៃទំនិញនៅក្នុងអេបជា (￥)</th>
          <th>តម្លៃទំនិញជា ($)</th>
          <th>អាត្រាប្តូរប្រាក់</th>
          <th>តម្លៃទំនិញក្នុងអេបជា ($)</th>
          <th>តម្លៃទំនិញដែលត្រូវកែជា ($)</th>
        </tr>
      </thead>
      <tbody id="tbody">
        <tr>
          <td>
            <input type="number" id="inputPrice1" placeholder="Enter price" />
          </td>
          <td>
            <input
              type="number"
              id="inputPrice2"
              placeholder="Enter price in app"
            />
          </td>
          <td><span id="rate"></span></td>
          <td><span id="convertPriceText"></span></td>
          <td><span id="changePriceText"></span></td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="2">
            <button id="btn1">
              <i class="bi bi-calculator"></i>
              គណនា
            </button>
          </td>

          <td colspan="2">
            <button id="btn2">
              <i class="bi bi-coin"></i>
              ចម្លងតម្លៃទំនិញ
            </button>
          </td>
          <td>
            <button id="btn3">
              <i class="bi bi-currency-exchange"></i>
              ចម្លងតម្លៃដែលត្រូវកែ
            </button>
          </td>
        </tr>
      </tfoot>
    </table>

    <script>
      const rate = document.querySelector("#rate");
      rate.innerHTML = 6.2;

      //declear btn
      const btn1 = document.querySelector("#btn1");
      const btn2 = document.querySelector("#btn2");

      btn1.addEventListener("click", () => {
        const inputPrice1 = parseFloat(
          document.getElementById("inputPrice1").value || 0
        );
        const inputPrice2 = parseFloat(
          document.getElementById("inputPrice2").value || 0
        );
        const convertPrice = (inputPrice1 / parseFloat(rate.innerHTML)).toFixed(
          2
        );

        const convertPriceText = document.querySelector("#convertPriceText");
        convertPriceText.innerText = convertPrice;

        const changePriceText = document.querySelector("#changePriceText");

        const changePrice = (convertPrice - inputPrice2).toFixed(2);

        changePrice > 0
          ? (changePriceText.style.color = "#FFD700")
          : (changePriceText.style.color = "#FF0000");
        changePriceText.innerText = changePrice;
      });

      //copyPaste
      btn2.addEventListener("click", () => {
        if (convertPriceText) {
          // Create the notification div element
          const noti = document.createElement("div");
          noti.style.position = "fixed";
          noti.style.top = "20px";
          noti.style.left = "50%";
          noti.style.padding = "10px";
          noti.style.backgroundColor = "#4CAF50"; // Green background for success
          noti.style.color = "white";
          noti.style.fontSize = "16px";
          noti.style.borderRadius = "5px";
          noti.style.zIndex = "9999"; // Ensure it's on top of other content

          // Write the text from the element to the clipboard
          navigator.clipboard
            .writeText(convertPriceText.innerText)
            .then(() => {
              // Display success notification
              noti.innerText = "Text copied to clipboard!";
              document.body.appendChild(noti);

              // Remove the notification after 3 seconds
              setTimeout(() => {
                noti.remove();
              }, 3000);
            })
            .catch((err) => {
              // Display error notification
              noti.innerText = "Failed to copy text.";
              noti.style.backgroundColor = "#FF0000"; // Red background for error
              document.body.appendChild(noti);

              // Remove the error notification after 3 seconds
              setTimeout(() => {
                noti.remove();
              }, 3000);

              console.error("Failed to copy: ", err);
            });
        } else {
          console.error("Element with id 'convertPriceText' not found.");
        }
      });



      btn3.addEventListener("click", () => {
        if (convertPriceText) {
          // Create the notification div element
          const noti = document.createElement("div");
          noti.style.position = "fixed";
          noti.style.top = "20px";
          noti.style.left = "50%";
          noti.style.padding = "10px";
          noti.style.backgroundColor = "#4CAF50"; // Green background for success
          noti.style.color = "white";
          noti.style.fontSize = "16px";
          noti.style.borderRadius = "5px";
          noti.style.zIndex = "9999"; // Ensure it's on top of other content

          // Write the text from the element to the clipboard
          navigator.clipboard
            .writeText(changePriceText.innerText)
            .then(() => {
              // Display success notification
              noti.innerText = "Text copied to clipboard!";
              document.body.appendChild(noti);

              // Remove the notification after 3 seconds
              setTimeout(() => {
                noti.remove();
              }, 3000);
            })
            .catch((err) => {
              // Display error notification
              noti.innerText = "Failed to copy text.";
              noti.style.backgroundColor = "#FF0000"; // Red background for error
              document.body.appendChild(noti);

              // Remove the error notification after 3 seconds
              setTimeout(() => {
                noti.remove();
              }, 3000);

              console.error("Failed to copy: ", err);
            });
        } else {
          console.error("Element with id 'convertPriceText' not found.");
        }
      });


    </script>
  </body>
</html>
